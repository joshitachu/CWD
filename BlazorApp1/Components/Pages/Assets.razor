@page "/Assets"
@inject AssetStateService AssetStateService
@inject NavigationManager NavigationManager


 @foreach( var asset in root.installation.assets){
                     <div class="nav-item px-3">
                    <NavLink class="nav-link">
                        <a @onclick="() => SelectAsset(asset.init.name)" >@asset.init.name</a>
                    </NavLink>
                     </div>

                    }



@code {

    SharedService sharedService;

    private bool collapseNavMenu = true;
    private bool expandSubMenu = false;


    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }

    private void ToggleSubMenu()
    {
        expandSubMenu = !expandSubMenu; // Toggle the value of expandSubMenu
    }

    string json2;
    Root root;
    [Parameter]
    public Asset selectedAsset { get; set; }

    [Parameter]
    public string test{get;set;}
    int count;

    private bool clicked;

    string selected = "";

    protected override void OnInitialized()
    {
        json2 = System.IO.File.ReadAllText("wwwroot/config_bestand_simualtie_in_json.json");

        // Deserialization
        root = Newtonsoft.Json.JsonConvert.DeserializeObject<Root>(json2);

        // Initialize count
        count = root?.installation?.assets?.Count ?? 0;
    }

    public void SelectAsset(string assetType)
    {
        selectedAsset = root.installation.assets.FirstOrDefault(a => a.init.name == assetType);
        clicked=true;
        
        this.selected=assetType;
        
    }

     

     
}
